<!DOCTYPE html>
<html lang="en">
<!--head starts-->
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">
<title></title>
<link rel="stylesheet" href="css/style.css" />
<link rel="stylesheet" href="css/jquery-ui.min.css" />
<script src="js/jquery-1.11.2.min.js"></script>
<script src="js/jquery-ui.min.js"></script>
<script src="js/owl.carousel.min.js"></script>
<script src="js/circles.min.js"></script>
<script src="js/jquery.selectBoxIt.min.js"></script>
<script src="js/highcharts.js"></script>
<script src="js/js"></script> 
<script src="js/infobox.js"></script> 
<script src="js/jquery.nicescroll.min.js"></script> 
<script src="js/jquery.selectbox-2.js"></script>
<script src="js/custom-radio-check.js"></script>
<script src="js/script.js"></script>  

</head>
<!--head ends-->
<body class="global">
<!--Header start-->
<header>
	<!--header-left start-->
    <div class="header-left">
        <div class="menu-icon">
            <i></i>
            <ul class="menu-drop">
                <li><a class="menuDash" href="javascript:void(0);"><i></i><span>Dashboard</span></a></li>
                <li><a class="menuAnalytic" href="javascript:void(0);"><i></i><span>Analytics</span></a></li>
                <li><a class="menuRule" href="javascript:void(0);"><i></i><span>Rule Admin</span></a></li>
                <li><a class="menuDevice" href="javascript:void(0);"><i></i><span>Device Management</span></a></li>
                <li><a class="menuAction" href="javascript:void(0);"><i></i><span>Action Templates</span></a></li>
                <li><a class="menuSystem" href="javascript:void(0);"><i></i><span>System Statistics</span></a></li>
                <li><a class="menuSetting" href="javascript:void(0);"><i></i><span>Settings</span></a></li>
            </ul>
        </div>
        <a class="logo"  href="javascript:void(0);"><img src="images/logo.png"  alt="logo"></a>
    </div>
    <!--header-left ends-->
    <!--header-right start-->
    <div class="header-right">
        <div class="header-search"><input type="text" id="searchID"><i class="search-icon"></i></div>
        <div class="header-user">
            <i class="user-icon"></i>
            <span>Admin</span>
            <div class="drop-arrow">
                <i></i>
                <ul class="admin-drop">
                    <li><a href="javascript:void(0);">Admin 1</a></li>
                    <li><a href="javascript:void(0);">Admin 2</a></li>
                    <li><a href="javascript:void(0);">Admin 3</a></li>
                    <li><a href="javascript:void(0);">Admin 4</a></li>
                </ul> 
            </div>                               
        </div>
        <div class="setting">
            <i></i>                    
            <ul class="setting-drop">
                <li><a href="javascript:void(0);">setting 1</a></li>
                <li><a href="javascript:void(0);">setting 2</a></li>
                <li><a href="javascript:void(0);">setting 3</a></li>
                <li><a href="javascript:void(0);">setting 4</a></li>
            </ul> 
        </div>
    </div>
    <!--header-right ends-->
</header>
<!--Header ends-->
<div class="map-wrap">
<div id="googleMap" style="height:1000px; width:100%;"></div>
<div class="middle-wrap">
      <div class="middle-wrap-in">
          <div class="user-detail-top">
              <div class="user-detail-left"><i></i><span>Users</span></div>
              <div class="user-detail-right"><span data-users="">276</span></div>
          </div>
          <div class="detail-bottom">
              <div class="detail-bottom-left">
                  <div class="day"><i></i><span>In last 7 days</span></div>
                  <div class="date"><i></i><span>12/02/2015 to 25/02/2015</span></div>
              </div>
              <div class="detail-bottom-right">
			   <div id="users-container" style="width: 50px; height: 35px; margin: 0 auto"></div>
			  </div>
          </div>
      </div>  
      <div class="middle-wrap-in detail-second">
          <div class="user-detail-top">
              <div class="user-detail-left"><i></i><span>Probing Users</span></div>
              <div class="user-detail-right"><span data-probing-users="" >123</span></div>
          </div>
          <div class="detail-bottom">
              <div class="detail-bottom-left">
                  <div class="day"><i></i><span>In last 7 days</span></div>
                  <div class="date"><i></i><span>12/02/2015 to 25/02/2015</span></div>
              </div>
              <div class="detail-bottom-right">
			  <div id="probing-user-container" style="width: 50px; height: 35px; margin: 0 auto"></div>
			  </div>
          </div>
      </div> 
      <div class="middle-wrap-in detail-third">
          <div class="user-detail-top">
              <div class="user-detail-left"><i></i><span>Associate Users</span></div>
              <div class="user-detail-right"><span data-associate-users="">134</span></div>
          </div>
          <div class="detail-bottom">
              <div class="detail-bottom-left">
                  <div class="day"><i></i><span>In last 7 days</span></div>
                  <div class="date"><i></i><span>12/02/2015 to 25/02/2015</span></div>
              </div>
              <div class="detail-bottom-right">
			  <div id="associate-users-container" style="width: 50px; height: 35px; margin: 0 auto"></div>
			  </div>
          </div>
      </div> 	
      <div class="middle-wrap-in detail-fourth">
          <div class="user-detail-top">
              <div class="user-detail-left"><i></i><span>Avg Dwell Time <i>(min)</i></span></div>
              <div class="user-detail-right"><span data-avgDwellTime="">50</span></div>
          </div>
          <div class="detail-bottom">
              <div class="detail-bottom-left">
                  <div class="day"><i></i><span>In last 7 days</span></div>
                  <div class="date"><i></i><span>12/02/2015 to 25/02/2015</span></div>
              </div>
              <div class="detail-bottom-right">
			  <div id="avg-dwell-time-container" style="width: 50px; height: 35px; margin: 0 auto"></div>
			  </div>
          </div>
      </div>
  </div>
  <!--Search start-->	
  <div class="search-section">
      <div class="search-location">
          <div class="search-input"><input type="text" class="search-id" id="searchHotel" placeholder="Search Location"><i class="search-icon"></i></div>
          <ul class="search-option">
              <li><a href="javascript:void(0);"><span>Grand Hyatt</span><i>109 E 42nd St  10017</i></a></li>
              <li><a href="javascript:void(0);"><span>Grand Hyatt</span><i>109 E 42nd St , NY 10017</i></a></li>
              <li><a href="javascript:void(0);"><span>Grand Hyatt</span><i>109 E 42nd St New York, NY 10017</i></a></li>
              <li><a href="javascript:void(0);"><span>Grand Hyatt</span><i>109 E 42nd St 10017</i></a></li>
              <li><a href="javascript:void(0);"><span>Grand Hyatt</span><i>109 E 42nd St 10017</i></a></li>
              <li><a href="javascript:void(0);"><span>Grand Hyatt</span><i>109 E 42nd St 10017</i></a></li>
              <li><a href="javascript:void(0);"><span>Grand Hyatt</span><i>109 E 42nd St 017</i></a></li>
              <li><a href="javascript:void(0);"><span>Grand Hyatt</span><i>109 E 42nd St 10017</i></a></li>
              <li class="full-list-arrow"><span><i></i></span></li>
          </ul>            
      </div>
      <!--Search ends-->            
  </div>
</div>
<div style="display:none;">
<div class="map-icon-detail" id="infobox">
            <h6 data-location="">Grand Hyatt New York</h6>
            <p data-address="">109 E 42nd St New York, NY 10017</p>
            <ul class="map-tool-data">
                <li><p><span data-users="">88</span><i>Users</i></p></li>
                <li><p><span data-probing-users="">54</span><i>Probing Users</i></p></li>
                <li><p><span data-associate-users="">34</span><i>Associate Users</i></p></li>
                <li><p><span data-avgDwellTime="">43</span><i>Average Dwell Time ( Min)</i></p></li>
            </ul>
        </div>
</div>


<!-- <div class="map-pointer">
    <div class="map-icon">
        <div class="map-icon-detail">
            <h6 data-location="">Grand Hyatt New York</h6>
            <p data-address="">109 E 42nd St New York, NY 10017</p>
            <ul class="map-tool-data">
                <li><p><span data-users="">88</span><span>Users</span></p></li>
                <li><p><span data-probing-users="">34</span><span>Associate Users</span></p></li>
                <li><p><span data-associate-users="">54</span><span>Probing Users</span></p></li>
                <li><p><span data-avgDwellTime="">43</span><span>Average Dwell Time ( Min)</span></p></li>
            </ul>
        </div>
    </div>
</div> -->

<script>
/*--google maps (start)--*/
 var markers   = [];
 var marker    = [];
 
 var hotels = [
      {
        label: "Grand Hyatt Amsterdam",
        address: "109 E 42nd St  10017",
		coordinates: [52.369580, 4.894151],//Amsterdam
		active : true,
		users: "234",
		probing_users:"123",
		associate_users: "145",
		avg_dwell_time : "45"
      }, 
	  {
        label: "Grand Hyatt London",
        address: "134 E 42nd St ,10017",
		coordinates: [51.518388, -0.129064],//London
		active : false,
		users: "342",
		probing_users:"123",
		associate_users: "130",
		avg_dwell_time : "50"
      }, 
	  {
        label: "Grand Hyatt Madrid",
        address: "109 E 42nd , 10017",
		coordinates: [40.416527, -3.706316],//Madrid
		active : false,
		users: "785",
		probing_users:"234",
		associate_users: "163",
		avg_dwell_time : "15"
      },
	   {
        label: "Grand Hyatt Hungary",
        address: "109 E 42nd ,10017",
		coordinates: [47.553745, 19.082781],//Hungary
		active : false,
		users: "785",
		probing_users:"234",
		associate_users: "163",
		avg_dwell_time : "15"
      },
	   {
        label: "Grand Hyatt Munich",
        address: "109 E 42nd , 10017",
		coordinates: [48.134866, 11.580288],//Munich
		active : false,
		users: "785",
		probing_users:"234",
		associate_users: "163",
		avg_dwell_time : "15"
      },
	   {
        label: "Grand Hyatt Warsaw",
        address: "109 E 42nd ,10017",
		coordinates: [52.228522, 21.011756],//Warsaw
		active : false,
		users: "785",
		probing_users:"234",
		associate_users: "163",
		avg_dwell_time : "15"
      },
	   {
        label: "Grand Hyatt Edinburg",
        address: "109 E 42nd ,10017",
		coordinates: [55.955724, -3.187702],//Edinburg
		active : false,
		users: "785",
		probing_users:"234",
		associate_users: "163",
		avg_dwell_time : "15"
      },
	   {
        label: "Grand Hyatt Paris",
        address: "109 E 42nd ,10017",
		coordinates: [48.856431, 2.351695],//Paris
		active : false,
		users: "785",
		probing_users:"234",
		associate_users: "163",
		avg_dwell_time : "15"
      },
	   {
        label: "Grand Hyatt Serbia",
        address: "109 E 42nd,10017",
		coordinates: [44.157589, 20.840018],//Serbia
		active : false,
		users: "785",
		probing_users:"234",
		associate_users: "163",
		avg_dwell_time : "15"
      },
	   {
        label: "Grand Hyatt Rome",
        address: "109 E 42nd ,10017",
		coordinates: [41.901639, 12.495486],//Rome
		active : false,
		users: "785",
		probing_users:"234",
		associate_users: "163",
		avg_dwell_time : "15"
      },
    ];

function initialize() {
  var mapProp = {
    center:new google.maps.LatLng(51.508742,-0.120850),
    zoom:5,
	minZoom: 3,
	mapTypeControl:false,
	zoomControl: false,
	panControl:false,
	disableDefaultUI: true
  };
  var map=new google.maps.Map(document.getElementById("googleMap"), mapProp);
  
  
  
  
  /*----prevent map from panning to grey area(start)----*/
  
  google.maps.event.addListener(map, 'center_changed', function() {
    checkBounds(map);
});
// If the map position is out of range, move it back
function checkBounds(map) {

var latNorth = map.getBounds().getNorthEast().lat();
var latSouth = map.getBounds().getSouthWest().lat();
var newLat;

if(latNorth<85 && latSouth>-85)     /* in both side -> it's ok */
    return;
else {
    if(latNorth>85 && latSouth<-85)   /* out both side -> it's ok */
        return;
    else {
        if(latNorth>85)   
            newLat =  map.getCenter().lat() - (latNorth-85);   /* too north, centering */
        if(latSouth<-85) 
            newLat =  map.getCenter().lat() - (latSouth+85);   /* too south, centering */
    }   
}
if(newLat) {
    var newCenter= new google.maps.LatLng( newLat ,map.getCenter().lng() );
    map.setCenter(newCenter);
    }   
}
  
/*----prevent map from panning to grey area(end)----*/
  
 

   /*----add markers(start)----*/
  for(var i=0;i < hotels.length;i++){

  
  
  markers[i]=new google.maps.Marker({
        position : new google.maps.LatLng(hotels[i].coordinates[0],hotels[i].coordinates[1]),
        icon     : new google.maps.MarkerImage("images/map-icon-grey.png"),
  });
   marker.push(markers[i]);
   marker[i].setMap(map);
}
/*----add markers(end)----*/ 

/*----tooltip (start)---*/

tooltip = new InfoBox({
    content :  document.getElementById("infobox"),
    disableAutoPan: false,
    width: 150,
    pixelOffset: new google.maps.Size(-15, -55),
    zIndex: null,
    boxStyle: {
                background: "",
                //opacity: 0.75,
                width: "30px",
		height: "50px"
        },
    closeBoxMargin: "12px 4px 2px 2px",
    closeBoxURL: "",
    infoBoxClearance: new google.maps.Size(1, 1)
});

/*----tooltip (end)---*/


/*---click listener (start)---*/


for(var i=0;i < marker.length;i++){
   
 listenMarker(marker[i],i);

}


/*---click listener (end)---*/


function listenMarker (marker,i)
{

	google.maps.event.addListener(marker, 'click', function() {
	
	for (var m = 0; m < markers.length; m++) {
           markers[m].setIcon('images/map-icon-grey.png');
        }
	
	/*--update chart(start)--*/
	
	var chart = [];	
	$('.detail-bottom-right').each(function(ind){
	 chart[ind] = $(this).highcharts();
		
	chart[ind].series[0].update({
		data: [r(),r(),r(),r(),r(),r(),r()]
	});
	});
	
	/*--update chart(end)--*/
	
	marker.setIcon('images/map-icon-blue.png');
    $(".search-option li").removeAttr("style");  
	if(!$(".search-option li:eq("+i+")").is(":visible")){
		 $( ".search-id" ).autocomplete("search", "").val("");
	}
	console.log("--i--");
	console.log(i);
	$(".search-option li:eq("+i+")").css("background","#e0f5ff");
	$(".search-option").animate({scrollTop:$(".search-option li:eq("+i+")").height()*i}, '500');
	tooltip.open(map, this);
	setTimeout(function(){
	
	$('[data-users]').text(hotels[i].users);
	$('[data-probing-users]').text(hotels[i].probing_users);
	$('[data-associate-users]').text(hotels[i].associate_users);
	$('[data-avgdwelltime]').text(hotels[i].avg_dwell_time);
	$('[data-location]').text(hotels[i].label);
	$('[data-address]').text(hotels[i].address); 
	
	},10);

	map.panTo(marker.getPosition());
	
	

	});
}



/*--close infobox on map click(start)--*/

google.maps.event.addListener(map, 'click', function(){ 
			$(".search-option li").removeAttr("style");
            tooltip.close();
			for(var k=0;k < hotels.length ;k++){
				marker[k].setIcon('images/map-icon-grey.png');
			}
         });
         
/*--close infobox on map click(end)--*/

  
  
  /*--google maps custom search (start) --*/
  
     
	var i = -1;
 
    $( ".search-id" ).autocomplete({
      minLength: 0,
      source: function(request, response){
	  
	  var results = $.ui.autocomplete.filter(hotels, request.term);
        
        if (!results.length) {
            $(".search-option").html("<span style='text-align:center;padding-top:10px;'>No results found!</li>");
        } else {
            //$("#no-results").empty();
        }
		response(results);
	  },
	  search: function( event, ui){
	   $(".search-option li").removeAttr("style");
		$( "ul.search-option" ).empty();
		i = -1;
		
	  },
      focus: function( event, ui ) {
        $(".search-id").val( ui.item.label );
        return false;
      },
      select: function( event, ui ) { 
        $(".search-id").val( ui.item.label ); 
        return false;
      }
	  
    })
    .autocomplete( "instance" )._renderItem = function( ul, item) {
      i++;
      return $( "<li>" )
        .append( "<a href='javascript:void(0);' data-index="+i+"><span>" + item.label + "</span><i>" + item.address + "</i></a>" )
        .appendTo( "ul.search-option" );
		
    };
  $( ".search-id" ).autocomplete("search", "");
  function r(){
		return Math.floor((Math.random() * 10) + 1);
	}
  $(document).on("click",".search-option li a",function(){

	/*--update chart(start)--*/
	
	var chart = [];	
	$('.detail-bottom-right').each(function(ind){
	 chart[ind] = $(this).highcharts();
		
	chart[ind].series[0].update({
		data: [r(),r(),r(),r(),r(),r(),r()]
	});
	});
	
	/*--update chart(end)--*/
	
  
	var index = $(this).attr("data-index");
    
	 $(".search-option li").removeAttr("style"); 
	 $(this).parent().css("background","#e0f5ff");
	
	/*update tiles start*/
	
	
	setTimeout(function(){
	$('[data-users]').text(hotels[index].users);
	$('[data-probing-users]').text(hotels[index].probing_users);
	$('[data-associate-users]').text(hotels[index].associate_users);
	$('[data-avgdwelltime]').text(hotels[index].avg_dwell_time);
	$('[data-location]').text(hotels[index].label);
	$('[data-address]').text(hotels[index].address);
	},10);
	
	
	/*update tiles end*/
		for(var i=0;i < hotels.length ;i++){
		if(i==index){
			marker[i].setIcon('images/map-icon-blue.png');
		}else{
			marker[i].setIcon('images/map-icon-grey.png');
		}
		}
		
		tooltip.open(map, marker[index]);
		map.panTo(marker[index].getPosition());
        

  });
  
  
  /*--google maps custom search (end) --*/
  
}
google.maps.event.addDomListener(window, 'load', initialize);




/*--google maps (end)--*/


/*----weekly users chart (start)----*/

var options = 	{
 chart: {
            type: 'column',
            backgroundColor: '#0093da',
			margin: [ 0, 0, 0, 0]
        },
        legend: { 
        },
       title: {
            text: ''
        },
        subtitle: {
            text: ''
        },
         legend: {
            enabled: false
        },
         credits: {
            enabled: false
        },
        exporting: {
            enabled: false
        },
        xAxis: {
            labels: {
               enabled: false
           },
             tickWidth: 0
        },
        yAxis: {
             title: {
                text: ''
            },
            labels: {
               enabled: false
           },
            min: 0,
            tickWidth: 0,
            gridLineWidth: 0
        },
		tooltip: {
			enabled: false
		},
        plotOptions: {
            column: {
                borderWidth: 0,
                color: "#ffffff",
            }
        },
        series: [{
            name: 'days',
            data: [4, 2, 4, 5, 6, 3, 6]

        }]
}



$(function () {

    $('.detail-bottom-right').each(function(){
		$(this).highcharts(options);
	});
	
	$(".search-option").niceScroll({
		cursorcolor:"#666666"
		});
});

/*----weekly users chart (end)----*/

</script>
</body>
</html>
